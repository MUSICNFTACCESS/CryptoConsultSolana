(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))c(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&c(a)}).observe(document,{childList:!0,subtree:!0});function s(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function c(n){if(n.ep)return;n.ep=!0;const o=s(n);fetch(n.href,o)}})();const i=document.getElementById("user-input"),r=document.getElementById("chat-box"),u=document.getElementById("prices"),p=document.getElementById("send-button"),h=document.getElementById("payment-options"),l=document.getElementById("sentiment-result"),d=document.getElementById("sentiment-query");let m=0;const g=3;async function f(e){if(r.innerHTML+=`<div class="user">üôãüèΩ‚Äç‚ôÇÔ∏è ${e}</div>`,i.value="",m>=g){r.innerHTML+='<div class="bot">‚ö†Ô∏è Free limit reached. Please <a class="button" href="https://commerce.coinbase.com/checkout/1d7cd946-d6ec-4278-b7ea-ee742b86982b">pay to continue</a>.</div>',h.style.display="block";return}try{const s=await(await fetch("https://crypto-consult.onrender.com/ask",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:e})})).json();r.innerHTML+=`<div class="bot">ü§ñ ${s.answer}</div>`,m++}catch{r.innerHTML+='<div class="bot">‚ùå Error: Failed to fetch response</div>'}r.scrollTop=r.scrollHeight}p.onclick=()=>{const e=i.value.trim();e&&f(e)};i.addEventListener("keypress",e=>{if(e.key==="Enter"){const t=i.value.trim();t&&f(t)}});async function y(){try{const t=await(await fetch("https://crypto-consult.onrender.com/prices")).json();u.innerText=`BTC: $${t.btc.toLocaleString()} | ETH: $${t.eth.toLocaleString()} | SOL: $${t.sol.toLocaleString()}`}catch{u.innerText="Price fetch error"}}y();setInterval(y,6e4);window.getSentiment=async function(){var t;const e=(t=d==null?void 0:d.value)==null?void 0:t.trim();if(e){l.innerText=`Analyzing sentiment for "${e}"...`;try{const c=await(await fetch("https://crypto-consult.onrender.com/api/sentiment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e})})).json();l.innerText=`Sentiment for "${e}": ${c.summary||"Neutral"} (${c.sentiment_score||"N/A"})`}catch{l.innerText="Error analyzing sentiment."}}};
